!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self)["docs-tools"]=n()}(this,function(){"use strict";var t=function(n){return function(t){return"<p>"+t.replace(new RegExp(this.match,"g"),n)+"</p>"}},n=function(t,n){return void 0===n&&(n=1),t.substring(n,t.length-n)},r={"^\\# ":"h1","^\\#{2} ":"h2","^\\#{3} ":"h3","^\\#{4} ":"h4","^\\#{5} ":"h5","^``` ":{special:function(t){return"```"===t},method:function(t){return'<div style="border:1px solid black;margin: 2px;background:#eee;">\n\t\t\t<code style="white-space: pre;">'+t+"</code>\n\t\t</div>"}},"`((?!`)[\\S|\\s])+`":t(function(t){return"<b>"+n(t)+"</b>"}),"(?<!\\\\|\\*)\\*((?!\\*)[\\S|\\s])+\\*":t(function(t){return"<i>"+n(t)+"</i>"}),"(?<!\\\\|\\*)\\*{2}((?!\\*)[\\S|\\s])+(\\*){2}":t(function(t){return"<b>"+n(t,2)+"</b>"}),"(?<!\\\\|\\*)\\*{3}((?!\\*)[\\S|\\s])+(\\*){3}":t(function(t){return"<b><i>"+n(t,3)+"</i></b>"}),"\\\\(\\*|\\[)":t(function(t){return"<span>"+t.substring(1)+"</span>"}),"^// ":function(t){return"\x3c!-- ["+t+"] --\x3e"},"\\[[a-zA-Z0-9-_]+\\]":t(function(t){return'<a href="#">'+t+"</a>"}),"^> ":function(t){return'<p style="text-indent:2em;background:silver;padding:5px 2px;">'+t+"</p>"},"--":function(){return"<hr />"}},e=function(t){this.content="",t instanceof HTMLElement?this.elem=t:this.content=t||"",this.result="",this.analysisEnd=!1};return e.prototype.wrap=function(t,n){return"<"+n+">"+t+"</"+n+">"},e.prototype.analysis=function(){var r=this;if(!this.analysisEnd){var s=null;this.result="";var o=this.splitParser();this.content.split("\n").map(function(t){var n=!0;for(var e in o){var i=o[e];if(s)return s.special(t)?(r.result+=s.method(s.content))&&(s=null):s.content+=t+"\n";if(i.matchResult=t.match(i.match)){if(i.special)return i.content="",s=i;n=!1,t=i.method(t)}}r.result+=n?"<p>"+t+"</p>":t}),this.analysisEnd=!0}},e.prototype.splitParser=function(){var i=this,t=[],n=function(n){var e={matchResult:n.matchResult,match:n,method:r[n],special:null,mode:"standard"};"object"==typeof r[n]?((e=r[n]).match=e.match||n,e.mode="full"):"string"==typeof r[n]&&(e.method=function(t){return i.wrap(t.substring(e.matchResult[0].length),r[n])},e.mode="simple"),t.push(e)};for(var e in r)n(e);return t},e.prototype.preview=function(t){t&&(this.elem=t),(t=this.elem).innerHTML="Loading...",this.analysis(),t.innerHTML=this.result},e.prototype.refresh=function(t){this.content=t,this.analysisEnd=!1,this.preview()},e});
